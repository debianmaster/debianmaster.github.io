<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=lhDjYqiy3mZ0x6ROQEUoUw');.lst-kix_rk5vqppyw7de-6>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-6,decimal) ". "}ol.lst-kix_rk5vqppyw7de-0.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-0 0}.lst-kix_rk5vqppyw7de-4>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-4,lower-latin) ". "}.lst-kix_rk5vqppyw7de-8>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-8,lower-roman) ". "}.lst-kix_rk5vqppyw7de-2>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-2}.lst-kix_rk5vqppyw7de-3>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-3,decimal) ". "}.lst-kix_rk5vqppyw7de-7>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-7,lower-latin) ". "}.lst-kix_rk5vqppyw7de-5>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-5,lower-roman) ". "}.lst-kix_l31989rbynmq-5>li{counter-increment:lst-ctn-kix_l31989rbynmq-5}.lst-kix_l31989rbynmq-6>li{counter-increment:lst-ctn-kix_l31989rbynmq-6}.lst-kix_rk5vqppyw7de-0>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-0,decimal) ". "}ol.lst-kix_rk5vqppyw7de-3.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-3 0}.lst-kix_rk5vqppyw7de-3>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-3}.lst-kix_rk5vqppyw7de-2>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-2,lower-roman) ". "}.lst-kix_rk5vqppyw7de-1>li:before{content:"" counter(lst-ctn-kix_rk5vqppyw7de-1,lower-latin) ". "}.lst-kix_l31989rbynmq-2>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-2,lower-roman) ". "}.lst-kix_l31989rbynmq-3>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-3,decimal) ". "}ol.lst-kix_l31989rbynmq-5.start{counter-reset:lst-ctn-kix_l31989rbynmq-5 0}.lst-kix_l31989rbynmq-4>li{counter-increment:lst-ctn-kix_l31989rbynmq-4}.lst-kix_l31989rbynmq-7>li{counter-increment:lst-ctn-kix_l31989rbynmq-7}.lst-kix_l31989rbynmq-7>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-7,lower-latin) ". "}.lst-kix_pqkbtnr8hpjg-3>li:before{content:"\0025cf  "}.lst-kix_l31989rbynmq-0>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-0,decimal) ". "}.lst-kix_l31989rbynmq-1>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-1,lower-latin) ". "}.lst-kix_l31989rbynmq-8>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-8,lower-roman) ". "}ol.lst-kix_rk5vqppyw7de-6.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-6 0}.lst-kix_pqkbtnr8hpjg-4>li:before{content:"\0025cb  "}.lst-kix_5f6r32euo33r-0>li:before{content:"\0025cf  "}.lst-kix_pqkbtnr8hpjg-2>li:before{content:"\0025a0  "}.lst-kix_l31989rbynmq-6>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-6,decimal) ". "}.lst-kix_pqkbtnr8hpjg-1>li:before{content:"\0025cb  "}.lst-kix_l31989rbynmq-4>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-4,lower-latin) ". "}.lst-kix_l31989rbynmq-5>li:before{content:"" counter(lst-ctn-kix_l31989rbynmq-5,lower-roman) ". "}ol.lst-kix_l31989rbynmq-2.start{counter-reset:lst-ctn-kix_l31989rbynmq-2 0}.lst-kix_rk5vqppyw7de-5>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-5}.lst-kix_pqkbtnr8hpjg-0>li:before{content:"\0025cf  "}ul.lst-kix_o82f7nnq7v4d-3{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-4{list-style-type:none}.lst-kix_nvv2jcnlk6ac-7>li:before{content:"\0025cb  "}ul.lst-kix_o82f7nnq7v4d-5{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-6{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-7{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-8{list-style-type:none}.lst-kix_nvv2jcnlk6ac-5>li:before{content:"\0025a0  "}.lst-kix_nvv2jcnlk6ac-6>li:before{content:"\0025cf  "}ol.lst-kix_rk5vqppyw7de-5.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-5 0}ol.lst-kix_l31989rbynmq-4.start{counter-reset:lst-ctn-kix_l31989rbynmq-4 0}.lst-kix_nvv2jcnlk6ac-3>li:before{content:"\0025cf  "}.lst-kix_nvv2jcnlk6ac-4>li:before{content:"\0025cb  "}ul.lst-kix_o82f7nnq7v4d-0{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-1{list-style-type:none}ul.lst-kix_o82f7nnq7v4d-2{list-style-type:none}ol.lst-kix_l31989rbynmq-6{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-4{list-style-type:none}ol.lst-kix_l31989rbynmq-7{list-style-type:none}.lst-kix_rk5vqppyw7de-0>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-0}.lst-kix_nvv2jcnlk6ac-0>li:before{content:"\0025cf  "}ul.lst-kix_pqkbtnr8hpjg-5{list-style-type:none}ol.lst-kix_l31989rbynmq-8{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-6{list-style-type:none}.lst-kix_pqkbtnr8hpjg-5>li:before{content:"\0025a0  "}ul.lst-kix_pqkbtnr8hpjg-7{list-style-type:none}.lst-kix_rk5vqppyw7de-6>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-6}ul.lst-kix_hyoqukwe4nl9-1{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-8{list-style-type:none}.lst-kix_nvv2jcnlk6ac-1>li:before{content:"\0025cb  "}.lst-kix_nvv2jcnlk6ac-2>li:before{content:"\0025a0  "}ul.lst-kix_hyoqukwe4nl9-2{list-style-type:none}.lst-kix_l31989rbynmq-3>li{counter-increment:lst-ctn-kix_l31989rbynmq-3}ul.lst-kix_hyoqukwe4nl9-0{list-style-type:none}.lst-kix_pqkbtnr8hpjg-6>li:before{content:"\0025cf  "}ol.lst-kix_l31989rbynmq-0{list-style-type:none}ol.lst-kix_l31989rbynmq-1{list-style-type:none}ol.lst-kix_l31989rbynmq-2{list-style-type:none}.lst-kix_pqkbtnr8hpjg-7>li:before{content:"\0025cb  "}ol.lst-kix_l31989rbynmq-3{list-style-type:none}ol.lst-kix_l31989rbynmq-4{list-style-type:none}.lst-kix_pqkbtnr8hpjg-8>li:before{content:"\0025a0  "}ol.lst-kix_l31989rbynmq-5{list-style-type:none}.lst-kix_gxsm7r98lt0r-1>li:before{content:"\0025cb  "}.lst-kix_gxsm7r98lt0r-2>li:before{content:"\0025a0  "}.lst-kix_gxsm7r98lt0r-3>li:before{content:"\0025cf  "}.lst-kix_hyoqukwe4nl9-2>li:before{content:"\0025a0  "}.lst-kix_gxsm7r98lt0r-5>li:before{content:"\0025a0  "}.lst-kix_gxsm7r98lt0r-4>li:before{content:"\0025cb  "}.lst-kix_gxsm7r98lt0r-6>li:before{content:"\0025cf  "}.lst-kix_hyoqukwe4nl9-3>li:before{content:"\0025cf  "}.lst-kix_hyoqukwe4nl9-4>li:before{content:"\0025cb  "}ol.lst-kix_rk5vqppyw7de-3{list-style-type:none}ol.lst-kix_rk5vqppyw7de-2{list-style-type:none}ol.lst-kix_rk5vqppyw7de-1{list-style-type:none}.lst-kix_gxsm7r98lt0r-8>li:before{content:"\0025a0  "}ol.lst-kix_rk5vqppyw7de-0{list-style-type:none}.lst-kix_gxsm7r98lt0r-7>li:before{content:"\0025cb  "}ol.lst-kix_rk5vqppyw7de-4.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-4 0}.lst-kix_hyoqukwe4nl9-1>li:before{content:"\0025cb  "}.lst-kix_hyoqukwe4nl9-0>li:before{content:"\0025cf  "}.lst-kix_rk5vqppyw7de-8>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-8}ol.lst-kix_l31989rbynmq-6.start{counter-reset:lst-ctn-kix_l31989rbynmq-6 0}ol.lst-kix_rk5vqppyw7de-8{list-style-type:none}.lst-kix_l31989rbynmq-0>li{counter-increment:lst-ctn-kix_l31989rbynmq-0}ol.lst-kix_rk5vqppyw7de-7{list-style-type:none}ol.lst-kix_rk5vqppyw7de-6{list-style-type:none}ol.lst-kix_rk5vqppyw7de-5{list-style-type:none}ol.lst-kix_rk5vqppyw7de-4{list-style-type:none}ul.lst-kix_5f6r32euo33r-2{list-style-type:none}ul.lst-kix_5f6r32euo33r-3{list-style-type:none}ul.lst-kix_5f6r32euo33r-4{list-style-type:none}.lst-kix_hyoqukwe4nl9-5>li:before{content:"\0025a0  "}.lst-kix_hyoqukwe4nl9-7>li:before{content:"\0025cb  "}ul.lst-kix_5f6r32euo33r-5{list-style-type:none}ul.lst-kix_5f6r32euo33r-6{list-style-type:none}ol.lst-kix_l31989rbynmq-3.start{counter-reset:lst-ctn-kix_l31989rbynmq-3 0}ul.lst-kix_5f6r32euo33r-7{list-style-type:none}.lst-kix_rk5vqppyw7de-7>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-7}ul.lst-kix_5f6r32euo33r-8{list-style-type:none}.lst-kix_hyoqukwe4nl9-6>li:before{content:"\0025cf  "}.lst-kix_o82f7nnq7v4d-8>li:before{content:"\0025a0  "}.lst-kix_hyoqukwe4nl9-8>li:before{content:"\0025a0  "}.lst-kix_o82f7nnq7v4d-7>li:before{content:"\0025cb  "}.lst-kix_gxsm7r98lt0r-0>li:before{content:"\0025cf  "}.lst-kix_o82f7nnq7v4d-6>li:before{content:"\0025cf  "}.lst-kix_o82f7nnq7v4d-3>li:before{content:"\0025cf  "}ul.lst-kix_hyoqukwe4nl9-5{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-5{list-style-type:none}ul.lst-kix_hyoqukwe4nl9-6{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-4{list-style-type:none}ul.lst-kix_hyoqukwe4nl9-3{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-3{list-style-type:none}ul.lst-kix_hyoqukwe4nl9-4{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-2{list-style-type:none}.lst-kix_o82f7nnq7v4d-5>li:before{content:"\0025a0  "}ul.lst-kix_pqkbtnr8hpjg-0{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-8{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-1{list-style-type:none}.lst-kix_o82f7nnq7v4d-4>li:before{content:"\0025cb  "}ul.lst-kix_hyoqukwe4nl9-7{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-7{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-2{list-style-type:none}ul.lst-kix_hyoqukwe4nl9-8{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-6{list-style-type:none}ul.lst-kix_pqkbtnr8hpjg-3{list-style-type:none}ol.lst-kix_rk5vqppyw7de-2.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-2 0}ul.lst-kix_gxsm7r98lt0r-1{list-style-type:none}ul.lst-kix_gxsm7r98lt0r-0{list-style-type:none}.lst-kix_o82f7nnq7v4d-2>li:before{content:"\0025a0  "}.lst-kix_o82f7nnq7v4d-1>li:before{content:"\0025cb  "}.lst-kix_l31989rbynmq-1>li{counter-increment:lst-ctn-kix_l31989rbynmq-1}.lst-kix_o82f7nnq7v4d-0>li:before{content:"\0025cf  "}.lst-kix_nvv2jcnlk6ac-8>li:before{content:"\0025a0  "}.lst-kix_5f6r32euo33r-8>li:before{content:"\0025a0  "}.lst-kix_5f6r32euo33r-6>li:before{content:"\0025cf  "}.lst-kix_5f6r32euo33r-7>li:before{content:"\0025cb  "}.lst-kix_l31989rbynmq-2>li{counter-increment:lst-ctn-kix_l31989rbynmq-2}.lst-kix_l31989rbynmq-8>li{counter-increment:lst-ctn-kix_l31989rbynmq-8}ul.lst-kix_nvv2jcnlk6ac-7{list-style-type:none}ul.lst-kix_nvv2jcnlk6ac-8{list-style-type:none}.lst-kix_5f6r32euo33r-1>li:before{content:"\0025cb  "}ol.lst-kix_l31989rbynmq-8.start{counter-reset:lst-ctn-kix_l31989rbynmq-8 0}ul.lst-kix_nvv2jcnlk6ac-5{list-style-type:none}ul.lst-kix_nvv2jcnlk6ac-6{list-style-type:none}ul.lst-kix_nvv2jcnlk6ac-3{list-style-type:none}ul.lst-kix_nvv2jcnlk6ac-4{list-style-type:none}.lst-kix_5f6r32euo33r-2>li:before{content:"\0025a0  "}.lst-kix_5f6r32euo33r-3>li:before{content:"\0025cf  "}ul.lst-kix_nvv2jcnlk6ac-1{list-style-type:none}ol.lst-kix_l31989rbynmq-1.start{counter-reset:lst-ctn-kix_l31989rbynmq-1 0}ul.lst-kix_nvv2jcnlk6ac-2{list-style-type:none}ul.lst-kix_nvv2jcnlk6ac-0{list-style-type:none}.lst-kix_5f6r32euo33r-4>li:before{content:"\0025cb  "}.lst-kix_5f6r32euo33r-5>li:before{content:"\0025a0  "}ol.lst-kix_rk5vqppyw7de-8.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-8 0}.lst-kix_rk5vqppyw7de-4>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-4}.lst-kix_rk5vqppyw7de-1>li{counter-increment:lst-ctn-kix_rk5vqppyw7de-1}ol.lst-kix_rk5vqppyw7de-1.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-1 0}ol.lst-kix_l31989rbynmq-0.start{counter-reset:lst-ctn-kix_l31989rbynmq-0 0}ul.lst-kix_5f6r32euo33r-0{list-style-type:none}ul.lst-kix_5f6r32euo33r-1{list-style-type:none}ol.lst-kix_rk5vqppyw7de-7.start{counter-reset:lst-ctn-kix_rk5vqppyw7de-7 0}ol.lst-kix_l31989rbynmq-7.start{counter-reset:lst-ctn-kix_l31989rbynmq-7 0}ol{margin:0;padding:0}table td,table th{padding:0}.c26{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:1pt;border-right-width:1pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:1pt;border-top-style:solid;background-color:#d9d9d9;border-left-style:solid;border-bottom-width:1pt;width:468pt;border-top-color:#000000;border-bottom-style:solid}.c56{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:99.8pt;border-top-color:#ffffff;border-bottom-style:solid}.c40{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:152.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c33{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#ffffff;border-top-width:1pt;border-right-width:1pt;border-left-color:#ffffff;vertical-align:top;border-right-color:#ffffff;border-left-width:1pt;border-top-style:solid;border-left-style:solid;border-bottom-width:1pt;width:332.2pt;border-top-color:#ffffff;border-bottom-style:solid}.c46{margin-left:72pt;padding-top:6pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{margin-left:36pt;padding-top:0pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c11{margin-left:36pt;padding-top:3pt;padding-left:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:9pt;font-family:"Consolas";font-style:normal}.c7{padding-top:0pt;padding-bottom:12pt;line-height:1.45;orphans:2;widows:2;text-align:left;height:11pt}.c20{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c34{margin-left:36pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:right}.c28{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c62{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c30{padding-top:3pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c16{padding-top:0pt;padding-bottom:12pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c25{padding-top:0pt;padding-bottom:12pt;line-height:1.45;orphans:2;widows:2;text-align:left}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c45{color:#0366d6;text-decoration:underline;vertical-align:baseline;font-size:12pt;font-style:normal}.c61{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c57{padding-top:3pt;padding-bottom:12pt;line-height:1.15;page-break-after:avoid;text-align:left}.c37{padding-top:18pt;padding-bottom:12pt;line-height:1.15;page-break-after:avoid;text-align:left}.c60{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;text-align:left}.c55{margin-left:-15pt;padding-top:18pt;padding-bottom:12pt;line-height:1.0;text-align:left}.c32{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;text-align:left}.c22{color:#000000;font-weight:400;font-size:11pt;font-family:"Arial"}.c36{color:#24292e;font-weight:700;font-size:16.5pt;font-family:"Arial"}.c35{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c13{border-spacing:0;border-collapse:collapse;margin-right:auto}.c0{font-size:9pt;font-family:"Consolas";color:#660066;font-weight:400}.c5{font-size:10pt;font-family:"Consolas";color:#24292e;font-weight:400}.c2{font-size:9pt;font-family:"Consolas";color:#666600;font-weight:400}.c43{margin-left:-66.8pt;border-spacing:0;border-collapse:collapse;margin-right:auto}.c3{font-size:9pt;font-family:"Consolas";color:#008800;font-weight:400}.c51{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c8{font-size:9pt;font-family:"Consolas";font-weight:400}.c21{text-decoration:none;vertical-align:baseline;font-style:normal}.c14{font-size:12pt;color:#24292e;font-weight:700}.c17{background-color:#ffffff;font-size:12pt;color:#24292e}.c19{color:#24292e;font-size:12pt}.c48{color:#ff0000;font-size:11pt}.c49{margin-left:72pt;padding-left:0pt}.c31{color:inherit;text-decoration:inherit}.c38{padding:0;margin:0}.c58{color:#000000;font-size:20pt}.c47{color:#000000;font-size:16pt}.c39{color:#ff0000;font-size:12pt}.c42{margin-left:36pt;padding-left:0pt}.c54{color:#0366d6;text-decoration:underline}.c29{font-weight:400;font-family:"Arial"}.c41{color:#1155cc;text-decoration:underline}.c27{color:#880000}.c12{color:#006666}.c52{font-size:12pt}.c50{font-family:"Arial"}.c44{height:14pt}.c18{height:11pt}.c6{background-color:#f6f8fa}.c53{background-color:#ffffff}.c24{height:21pt}.c23{height:15pt}.c10{color:#000088}.c15{height:0pt}.c59{margin-left:36pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c51"><div><p class="c18 c34"><span class="c22 c21"></span></p><a id="t.6629782ea3036bb634eef6e2d5d50ac6de33dcd0"></a><a id="t.27"></a><table class="c43"><tbody><tr class="c15"><td class="c40" colspan="1" rowspan="1"><p class="c35"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 98.56px; height: 50.50px;"><img alt="" src="images/image9.png" style="width: 98.56px; height: 50.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c33" colspan="1" rowspan="1"><p class="c18 c35"><span class="c22 c21"></span></p></td><td class="c56" colspan="1" rowspan="1"><p class="c28 c59"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 75.50px; height: 35.23px;"><img alt="" src="images/image10.png" style="width: 75.50px; height: 35.23px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c59 c62"><span class="c22 c21">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></div><h1 class="c60" id="h.edsl1owjnii6"><span class="c21 c29 c58">Creating your own S2I Builder</span></h1><p class="c28 c18"><span class="c22 c21"></span></p><p class="c16"><span class="c21 c19 c29">In this lab you will learn to create S2I (Source to Image) builder images using RHEL base image. This is a simple example that creates a Lighttpd S2I image to run on OpenShift. You can follow a similar approach for other technologies.</span></p><p class="c16"><span class="c21 c19 c29">The code used created in this lab is available on github here</span></p><p class="c16"><span class="c41 c52"><a class="c31" href="https://www.google.com/url?q=https://github.com/RedHatWorkshops/lighttpd-rhel&amp;sa=D&amp;ust=1493768895335000&amp;usg=AFQjCNHLOYmhG-ZEW_6DfyPeLAdmvwH66g">https://github.com/RedHatWorkshops/lighttpd-rhel</a></span></p><p class="c16"><span class="c21 c19 c29">You can git clone this and copy the code from here if you wish. &nbsp;Tips to do this</span></p><ol class="c38 lst-kix_rk5vqppyw7de-0 start" start="1"><li class="c1"><span class="c21 c19 c29">Open a separate terminal window</span></li><li class="c1"><span class="c19">Create a directory and change to this directory by running</span></li></ol><a id="t.00dc38c99817d87390d162b38da048bd8462c3c9"></a><a id="t.0"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c4">$ mkdir codefromgit</span></p><p class="c9"><span class="c8">$ cd codefromgit</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c21 c19 c29"></span></p><ol class="c38 lst-kix_rk5vqppyw7de-0" start="3"><li class="c1"><span class="c19">Run git clone. This will create a lighttpd-rhel directory with your code inside.</span></li></ol><a id="t.ebca4886e18678868d7517179271338fedee4b2a"></a><a id="t.1"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c4">$ git clone https://github.com/RedHatWorkshops/lighttpd-rhel</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c21 c19 c29"></span></p><p class="c16"><span class="c19">Keep this terminal open to copy and paste your code from.</span></p><h2 class="c37" id="h.rh5t6cmfmbtp"><span class="c21 c47 c29">Assumptions</span></h2><ol class="c38 lst-kix_l31989rbynmq-0 start" start="1"><li class="c28 c42"><span class="c22 c21">You know OpenShift and you should have used OpenShift S2I to deploy your applications. You are here to learn how to create S2I builders.</span></li><li class="c28 c42"><span class="c22 c21">You should know to use git apis, basic Linux skills, and using vi editor.</span></li></ol><h2 class="c37" id="h.3e30uaetrv62"><span class="c21 c29 c47">Prerequisites</span></h2><ul class="c38 lst-kix_gxsm7r98lt0r-0 start"><li class="c1"><span class="c21 c19 c29">This lab requires a RHEL box as we will be using RHEL base image in this use case. In order to build using a RHEL base image you will need a RHEL box; for other base images, it is not required.</span></li><li class="c1"><span class="c19">This rhel box should be subscribed to Red Hat Network. Hence you are given a RHEL machine that is pre-subscribed with the Red Hat Network. If you want to repeat this lab at home, please check on </span><span class="c41 c52"><a class="c31" href="https://www.google.com/url?q=https://www.redhat.com/en/about/press-releases/red-hat-expands-red-hat-developer-program-no-cost-red-hat-enterprise-linux-developer-subscription&amp;sa=D&amp;ust=1493768895344000&amp;usg=AFQjCNGBxSvg_6HV69vh40S5Lcrz0GO9qQ">developer subscriptions</a></span><span class="c21 c29 c39">.</span></li><li class="c11"><span class="c19">Make sure that docker is installed and is running on this RHEL box (</span><span class="c5 c6">yum install docker -y</span><span class="c21 c19 c29">). It is already installed and running for you.</span></li><li class="c11"><span class="c21 c19 c29">In order to use this image, you will need an OpenShift cluster. It can be as simple as `oc cluster up`. OpenShift is already running on the machine given to you.</span></li><li class="c11"><span class="c19">S2I tools are available to download for the latest </span><span class="c17">linux version from </span><span class="c52 c53 c54"><a class="c31" href="https://www.google.com/url?q=https://github.com/RedHatWorkshops/openshiftv3-advanced-workshop/blob/master&amp;sa=D&amp;ust=1493768895347000&amp;usg=AFQjCNG1Jrz5TQCvM4yZvKSU7kdGEipq_A">https://github.com/openshift/source-to-image/releases/</a></span><span class="c19">. &nbsp;We already downloaded the S2I tools for you and they are in </span><span class="c5 c21 c6">/usr/local/bin</span></li></ul><p class="c18 c30"><span class="c5 c21 c6"></span></p><hr style="page-break-before:always;display:none;"><p class="c30 c18"><span class="c5 c21 c6"></span></p><h2 class="c61" id="h.17tvwshtl2pe"><span class="c21 c47 c29">Using S2I Tools to create S2I Builder</span></h2><p class="c28"><span class="c22 c21">This section takes you step-by-step to create the lighttpd S2I builder image.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span>&nbsp;</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 702.52px; height: 294.50px;"><img alt="" src="images/image7.png" style="width: 702.52px; height: 294.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><h3 class="c57" id="h.7jrgx6m7akzq"><span class="c20">Step 1: Verify the S2I tool and Local OpenShift</span></h3><p class="c30"><span class="c17">Verify that the </span><span class="c5">s2i</span><span class="c17">&nbsp;tool works on the box by running</span></p><a id="t.5a223cd7f17cb77a0df07795ada5379aec9df9de"></a><a id="t.2"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ s2i<br></span><span class="c0">Source</span><span class="c2">-</span><span class="c8">to</span><span class="c2">-</span><span class="c8">image </span><span class="c2">(</span><span class="c8">S2I</span><span class="c2">)</span><span class="c8">&nbsp;</span><span class="c8 c10">is</span><span class="c8">&nbsp;a tool </span><span class="c8 c10">for</span><span class="c8">&nbsp;building repeatable docker images</span><span class="c2">.</span><span class="c8"><br><br>A command line </span><span class="c8 c10">interface</span><span class="c8">&nbsp;that injects </span><span class="c8 c10">and</span><span class="c8">&nbsp;assembles source code </span><span class="c8 c10">into</span><span class="c8">&nbsp;a docker image</span><span class="c2">.</span><span class="c8"><br></span><span class="c0">Complete</span><span class="c8">&nbsp;documentation </span><span class="c8 c10">is</span><span class="c8">&nbsp;available at http</span><span class="c2">:</span><span class="c8 c27">//github.com/openshift/source-to-image</span><span class="c8"><br><br></span><span class="c0">Usage</span><span class="c2">:</span><span class="c8"><br> &nbsp;s2i </span><span class="c2">[</span><span class="c8">flags</span><span class="c2">]</span><span class="c8"><br> &nbsp;s2i </span><span class="c2">[</span><span class="c8">command</span><span class="c2">]</span><span class="c8"><br><br></span><span class="c0">Available</span><span class="c8">&nbsp;</span><span class="c0">Commands</span><span class="c2">:</span><span class="c8"><br> &nbsp;version &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Display</span><span class="c8">&nbsp;version<br> &nbsp;build &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Build</span><span class="c8">&nbsp;a </span><span class="c8 c10">new</span><span class="c8">&nbsp;image<br> &nbsp;rebuild &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Rebuild</span><span class="c8">&nbsp;an existing image<br> &nbsp;usage &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c0">Print</span><span class="c8">&nbsp;usage of the assemble script associated </span><span class="c8 c10">with</span><span class="c8">&nbsp;the image<br> &nbsp;create &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c0">Bootstrap</span><span class="c8">&nbsp;a </span><span class="c8 c10">new</span><span class="c8">&nbsp;S2I image repository<br> &nbsp;genbashcompletion </span><span class="c0">Generate</span><span class="c8">&nbsp;</span><span class="c0">Bash</span><span class="c8">&nbsp;completion </span><span class="c8 c10">for</span><span class="c8">&nbsp;the s2i command<br><br></span><span class="c0">Flags</span><span class="c2">:</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;</span><span class="c2">--</span><span class="c8">ca</span><span class="c2">=</span><span class="c3">&quot;&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Set</span><span class="c8">&nbsp;the path of the docker TLS ca file<br> &nbsp; &nbsp; &nbsp;</span><span class="c2">--</span><span class="c8">cert</span><span class="c2">=</span><span class="c3">&quot;&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Set</span><span class="c8">&nbsp;the path of the docker TLS certificate file<br> &nbsp;</span><span class="c2">-</span><span class="c8">h</span><span class="c2">,</span><span class="c8">&nbsp;</span><span class="c2">--</span><span class="c8">help</span><span class="c2">[=</span><span class="c8 c10">false</span><span class="c2">]:</span><span class="c8">&nbsp;help </span><span class="c8 c10">for</span><span class="c8">&nbsp;s2i<br> &nbsp; &nbsp; &nbsp;</span><span class="c2">--</span><span class="c8">key</span><span class="c2">=</span><span class="c3">&quot;&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Set</span><span class="c8">&nbsp;the path of the docker TLS key file<br> &nbsp; &nbsp; &nbsp;</span><span class="c2">--</span><span class="c8">loglevel</span><span class="c2">=</span><span class="c8 c12">0</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Set</span><span class="c8">&nbsp;the level of log output </span><span class="c2">(</span><span class="c8 c12">0</span><span class="c2">-</span><span class="c8 c12">5</span><span class="c2">)</span><span class="c8"><br> &nbsp;</span><span class="c2">-</span><span class="c8">U</span><span class="c2">,</span><span class="c8">&nbsp;</span><span class="c2">--</span><span class="c8">url</span><span class="c2">=</span><span class="c3">&quot;unix:///var/run/docker.sock&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Set</span><span class="c8">&nbsp;the url of the docker socket to </span><span class="c8 c10">use</span><span class="c8"><br><br></span><span class="c0">Use</span><span class="c8">&nbsp;</span><span class="c3">&quot;s2i [command] --help&quot;</span><span class="c8">&nbsp;</span><span class="c8 c10">for</span><span class="c8">&nbsp;more information about a command.</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c28"><span>The machine provided to you is running a local OpenShift cluster. To verify OpenShift is running, open Firefox browser by clicking on on the top menu </span><span class="c5 c21 c6">Applications-&gt;Firefox Web Browser</span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: -0.00px -0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 455.92px; height: 82.50px;"><img alt="" src="images/image11.png" style="width: 455.92px; height: 82.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span>The browser has been configured to log into OpenShift running locally by default. If not try accessing </span><span class="c41"><a class="c31" href="https://www.google.com/url?q=https://ocp.127.0.0.1.nip.io:8443/console&amp;sa=D&amp;ust=1493768895389000&amp;usg=AFQjCNHEyZbkCMF4Q03FDI6DOrnOREWVCw">https://ocp.127.0.0.1.nip.io:8443/console</a></span><span class="c22 c21">&nbsp;from the browser.</span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: -0.00px 0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 566.50px; height: 275.08px;"><img alt="" src="images/image2.png" style="width: 566.50px; height: 275.08px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28"><span>You will see a warning that the </span><span class="c5 c6">Connection is not secure</span><span>. Add an Exception by clicking on the </span><span class="c5 c6">Add Exception</span><span>&nbsp;button on the browser and on the next page press the button &nbsp;</span><span class="c5 c6">Confirm Security Exception</span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: -0.00px 0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 262.67px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 262.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: -0.00px -0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 455.78px; height: 391.50px;"><img alt="" src="images/image1.png" style="width: 455.78px; height: 391.50px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span class="c22 c21">Now it should take you to the OpenShift Web Console to Login.</span></p><p class="c28"><span>The username to login is </span><span class="c5 c6">developer</span><span>&nbsp;and the password is </span><span class="c5 c6">developer</span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 316.00px;"><img alt="" src="images/image4.png" style="width: 624.00px; height: 316.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span>Once logged in you will find a project named </span><span class="c5 c6">myproject</span><span class="c22 c21">&nbsp;already created for you. We will be using this project a little later. </span></p><p class="c28"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 192.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 192.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c32" id="h.bbabrux058uq"><span class="c20">Step 2 Create the S2I Builder Working Structure</span></h3><p class="c28"><span class="c22 c21">S2I tools provide the following syntax to create a default working structure for you. You can edit the files to create the S2I builder image from this structure.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c16"><span class="c5 c6">s2i create &lt;future-builder-image-name&gt; &lt;builder-image-src-folder&gt;</span></p><p class="c16 c18"><span class="c21 c19 c29"></span></p><p class="c16"><span class="c19">Run the following command to create a directory named </span><span class="c5">s2i-lighttpd</span><span class="c19">&nbsp;where the artifacts for the S2I builder will be added. The target S2I builder image name will be </span><span class="c5">lighttpd-rhel</span></p><a id="t.39f315d1d5994809a32e45667b21b61cfb69a3d6"></a><a id="t.3"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ s2i create </span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c8">rhel</span><span class="c8">&nbsp;s2i</span><span class="c2">-</span><span class="c8">lighttpd</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Run </span><span class="c5">ls s2i-lighttpd</span><span class="c21 c19 c29">&nbsp;and observe the following folder structure</span></p><ul class="c38 lst-kix_5f6r32euo33r-0 start"><li class="c1"><span class="c5">Dockerfile</span><span class="c21 c19 c29">&nbsp;&ndash; This is a standard Dockerfile where we&rsquo;ll define the builder image</span></li><li class="c11"><span class="c5">Makefile</span><span class="c21 c19 c29">&nbsp;&ndash; a helper script for building and testing the builder image</span></li><li class="c11"><span class="c5 c21">test/</span></li></ul><ul class="c38 lst-kix_5f6r32euo33r-1 start"><li class="c30 c49"><span class="c5">run</span><span class="c21 c19 c29">&nbsp;&ndash; test script to test if the builder image works correctly</span></li><li class="c46"><span class="c5">test-app/</span><span class="c21 c19 c29">&nbsp;&ndash; directory for your test application</span></li></ul><ul class="c38 lst-kix_5f6r32euo33r-0"><li class="c11"><span class="c5 c21">s2i/bin/</span></li></ul><ul class="c38 lst-kix_5f6r32euo33r-1 start"><li class="c30 c49"><span class="c5">assemble</span><span class="c21 c19 c29">&nbsp;&ndash; script responsible for building the application</span></li><li class="c46"><span class="c5">run</span><span class="c21 c19 c29">&nbsp;&ndash; script responsible for running the application</span></li><li class="c46"><span class="c5">save-artifacts</span><span class="c21 c19 c29">&nbsp;&ndash; script responsible for incremental builds</span></li><li class="c46"><span class="c5">usage</span><span class="c21 c19 c29">&nbsp;&ndash; script responsible for printing the usage of the builder image</span></li></ul><h3 class="c32 c44" id="h.2dd8n9tjpgnt"><span class="c20"></span></h3><h3 class="c32" id="h.8epl911pgd16"><span>Step 3 Update Assemble and Run Scripts</span></h3><p class="c16"><span class="c21 c19 c29">Lighttpd is a httpd server. The only thing we need to do during assembly is to copy the source files into a directory from which lighttpd will serve.</span></p><p class="c16"><span class="c19">By default , the S2I builder will copy the source code into </span><span class="c5">/tmp/src</span><span class="c19">. If you want, this location can be changed by setting the </span><span class="c5">io.openshift.s2i.destination</span><span class="c19">&nbsp;label or passing </span><span class="c5">--destination</span><span class="c19">&nbsp;flag, in which case the sources will be placed in the </span><span class="c5">src </span><span class="c21 c19 c29">subdirectory of the directory you specified. </span></p><p class="c16"><span class="c19">In the </span><span class="c5">assemble</span><span class="c19">&nbsp;code below we will copy the source from this </span><span class="c5">/tmp/src</span><span class="c19">&nbsp;to the working directory ,which is</span><span class="c5">&nbsp;/opt/app-root/src</span><span class="c19">. You will see that when we create the container image.</span></p><p class="c16"><span class="c21 c19 c29">But s2i is meant to do more than that. As an example, if you were using a language such as java, you can compile your code here to produce a binary. Just to give a taste of some additional magic, let us make our lighttpd image a little smart. We will add some functionality to unzip a compressed file if your htmls are provided as a zip file.</span></p><p class="c16"><span class="c19">Edit </span><span class="c5">s2i/bin/assemble</span><span class="c19">&nbsp;script to be as below:</span></p><a id="t.14608d3ebca07e5b8cef52e7e417179e01f0f52a"></a><a id="t.4"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8 c27">#!/bin/bash -e</span></p><p class="c9"><span class="c4">#</span></p><p class="c9"><span class="c8 c27"># S2I assemble script for the &#39;lighttpd-rhel&#39; image.</span></p><p class="c9"><span class="c8 c27"># The &#39;assemble&#39; script builds your application source so that it is ready to run.</span></p><p class="c9"><span class="c4">#</span></p><p class="c9"><span class="c8 c27"># For more information refer to the documentation:</span></p><p class="c9"><span class="c8 c27"># &nbsp; https://github.com/openshift/source-to-image/blob/master/docs/builder_image.md</span></p><p class="c9"><span class="c4">#</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c10">if</span><span class="c8">&nbsp;</span><span class="c2">[[</span><span class="c8">&nbsp;</span><span class="c3">&quot;$1&quot;</span><span class="c8">&nbsp;</span><span class="c2">==</span><span class="c8">&nbsp;</span><span class="c3">&quot;-h&quot;</span><span class="c8">&nbsp;</span><span class="c2">]];</span><span class="c8">&nbsp;</span><span class="c8 c10">then</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c27"># If the &#39;lighttpd-rhel&#39; assemble script is executed with &#39;-h&#39; flag,</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c27"># print the usage.</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c10">exec</span><span class="c8">&nbsp;</span><span class="c2">/</span><span class="c8">usr</span><span class="c2">/</span><span class="c8">libexec</span><span class="c2">/</span><span class="c8">s2i</span><span class="c2">/</span><span class="c4">usage</span></p><p class="c9"><span class="c8 c10">fi</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># Restore artifacts from the previous build (if they exist).</span></p><p class="c9"><span class="c4">#</span></p><p class="c9"><span class="c8 c10">if</span><span class="c8">&nbsp;</span><span class="c2">[</span><span class="c8">&nbsp;</span><span class="c3">&quot;$(ls /tmp/artifacts/ 2&gt;/dev/null)&quot;</span><span class="c8">&nbsp;</span><span class="c2">];</span><span class="c8">&nbsp;</span><span class="c8 c10">then</span></p><p class="c9"><span class="c8">&nbsp; echo </span><span class="c3">&quot;---&gt; Restoring build artifacts...&quot;</span></p><p class="c9"><span class="c8">&nbsp; mv </span><span class="c2">/</span><span class="c8">tmp</span><span class="c2">/</span><span class="c8">artifacts</span><span class="c2">/.</span><span class="c8">&nbsp;</span><span class="c2">./</span></p><p class="c9"><span class="c8 c10">fi</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8">echo </span><span class="c3">&quot;---&gt; Installing application source...&quot;</span></p><p class="c9"><span class="c8">cp </span><span class="c2">-</span><span class="c0">Rf</span><span class="c8">&nbsp;</span><span class="c2">/</span><span class="c8">tmp</span><span class="c2">/</span><span class="c8">src</span><span class="c2">/.</span><span class="c8">&nbsp;</span><span class="c2">./</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8">echo </span><span class="c3">&quot;---&gt; Building application from source...&quot;</span></p><p class="c9"><span class="c8 c27"># Unzip if any compressed files</span></p><p class="c9"><span class="c8">files</span><span class="c2">=(</span><span class="c8">$</span><span class="c2">(</span><span class="c8">ls </span><span class="c2">-</span><span class="c8 c12">1</span><span class="c8">&nbsp;</span><span class="c2">/</span><span class="c8">tmp</span><span class="c2">/</span><span class="c8">src</span><span class="c2">))</span></p><p class="c9"><span class="c8 c10">for</span><span class="c8">&nbsp;file </span><span class="c8 c10">in</span><span class="c8">&nbsp;$</span><span class="c2">{</span><span class="c8">files</span><span class="c2">[*]}</span></p><p class="c9"><span class="c8 c10">do</span></p><p class="c9"><span class="c8">&nbsp; </span><span class="c8 c10">if</span><span class="c8">&nbsp;</span><span class="c2">[</span><span class="c8">&nbsp;$</span><span class="c2">{</span><span class="c8">file</span><span class="c8 c27">##*.} = &quot;zip&quot; ]; then</span></p><p class="c9"><span class="c8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unzip $</span><span class="c2">{</span><span class="c8">file</span><span class="c2">} </span></p><p class="c9"><span class="c8">&nbsp; </span><span class="c8 c10">fi</span></p><p class="c9"><span class="c8 c10">done</span></p></td></tr></tbody></table><p class="c28"><span><br>So the code above will copy the sources to the home directory, and if there are any zip files in the source code it will also unzip the same into home.</span></p><p class="c16"><span class="c19">Now, change the </span><span class="c5">s2i/bin/run</span><span class="c19">&nbsp;script to start Lighttpd server as shown below:</span></p><a id="t.e5ce48384364b2594bc1a96b45d00328a2d4785b"></a><a id="t.5"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8 c27">#!/bin/bash -e</span><span class="c8"><br></span><span class="c8 c27">#</span><span class="c8"><br></span><span class="c8 c27"># S2I run script for the &#39;lighttpd-rhel&#39; image.</span><span class="c8"><br></span><span class="c8 c27"># The run script executes the server that runs your application.</span><span class="c8"><br></span><span class="c8 c27">#</span><span class="c8"><br></span><span class="c8 c27"># For more information see the documentation:</span><span class="c8"><br></span><span class="c8 c27"># &nbsp; https://github.com/openshift/source-to-image/blob/master/docs/builder_image.md</span><span class="c8"><br></span><span class="c8 c27">#</span><span class="c8"><br><br></span><span class="c8 c27">#exec &lt;start your server here&gt;</span><span class="c8"><br></span><span class="c8 c10">exec</span><span class="c8">&nbsp;lighttpd </span><span class="c2">-</span><span class="c8">D </span><span class="c2">-</span><span class="c8">f </span><span class="c2">/</span><span class="c8">opt</span><span class="c2">/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root</span><span class="c2">/</span><span class="c8">etc</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">.</span><span class="c4">conf</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Note The above </span><span class="c5">exec</span><span class="c19">&nbsp;command refers to a </span><span class="c5">lighttpd.conf</span><span class="c21 c19 c29">&nbsp;configuration file. We will create that in the next step.</span></p><p class="c16"><span class="c19">Let&rsquo;s understand a little bit about </span><span class="c5">s2i/bin/save-artifacts</span><span class="c19">&nbsp;although we won&rsquo;t use it in this example. </span><span class="c19">This script is run to copy any previously downloaded dependencies into the new build so that they are not re-downloaded again when you are using incremental builds. As an example, if we were running maven builds, if you want to save on downloading the dependencies each time the build is run, you can use incremental builds. If incremental builds are used, this </span><span class="c5">save-artifacts</span><span class="c19">&nbsp;script is invoked. Since it doesn&rsquo;t apply here, let&rsquo;s delete the same.</span></p><a id="t.da93afd811f76c3598d76a3a7040b404abc82377"></a><a id="t.6"></a><table class="c13"><tbody><tr class="c24"><td class="c26" colspan="1" rowspan="1"><p class="c25"><span class="c8">$ rm s2i/bin/save-artifacts</span></p></td></tr></tbody></table><p class="c7"><span class="c8 c21 c10"></span></p><p class="c16"><span class="c19">Next, let us change the permissions for all the script files by running</span></p><a id="t.a8bdb68b6dbf6b862dd64d7efcea91e9a4579732"></a><a id="t.7"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c25"><span class="c8">$ chmod 755 s2i/bin/*</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c21 c19 c29">Now the S2I scripts are ready.</span></p><h3 class="c55" id="h.lwz9c0rku8il"><span class="c20">Step 4 Add Lighttpd Configuration File</span></h3><p class="c16 c18"><span class="c5 c21 c6"></span></p><a id="t.ca675117e19f0a6773b535430879c518815996d2"></a><a id="t.8"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c25"><span class="c8">$ mkdir ./etc</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c21 c19 c29"></span></p><p class="c16"><span class="c19">Lighttpd requires a configuration file to run this server. Let us add this file </span><span class="c5">s2i-lighttpd/</span><span class="c5">etc/lighttpd.conf</span><span class="c19">&nbsp;with minimal content for Lighttpd to run.</span></p><a id="t.59417338c9b1f5e3131ce8f8174efdc4acffc5e2"></a><a id="t.9"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8 c27"># directory where the documents will be served from</span><span class="c8"><br>server</span><span class="c2">.</span><span class="c8">document</span><span class="c2">-</span><span class="c8">root </span><span class="c2">=</span><span class="c8">&nbsp;</span><span class="c3">&quot;/opt/app-root/src&quot;</span><span class="c8"><br><br></span><span class="c8 c27"># port the server listens on</span><span class="c8"><br>server</span><span class="c2">.</span><span class="c8">port </span><span class="c2">=</span><span class="c8">&nbsp;</span><span class="c8 c12">8080</span><span class="c8"><br><br></span><span class="c8 c27"># default file if none is provided in the URL</span><span class="c8"><br>index</span><span class="c2">-</span><span class="c8">file</span><span class="c2">.</span><span class="c8">names </span><span class="c2">=</span><span class="c8">&nbsp;</span><span class="c2">(</span><span class="c8">&nbsp;</span><span class="c3">&quot;index.html&quot;</span><span class="c8">&nbsp;</span><span class="c2">)</span><span class="c8"><br><br></span><span class="c8 c27"># configure specific mimetypes, otherwise application/octet-stream will be used for every file</span><span class="c8"><br>mimetype</span><span class="c2">.</span><span class="c8">assign </span><span class="c2">=</span><span class="c8">&nbsp;</span><span class="c2">(</span><span class="c8"><br> &nbsp;</span><span class="c3">&quot;.html&quot;</span><span class="c8">&nbsp;</span><span class="c2">=&gt;</span><span class="c8">&nbsp;</span><span class="c3">&quot;text/html&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp;</span><span class="c3">&quot;.txt&quot;</span><span class="c8">&nbsp;</span><span class="c2">=&gt;</span><span class="c8">&nbsp;</span><span class="c3">&quot;text/plain&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp;</span><span class="c3">&quot;.jpg&quot;</span><span class="c8">&nbsp;</span><span class="c2">=&gt;</span><span class="c8">&nbsp;</span><span class="c3">&quot;image/jpeg&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp;</span><span class="c3">&quot;.png&quot;</span><span class="c8">&nbsp;</span><span class="c2">=&gt;</span><span class="c8">&nbsp;</span><span class="c3">&quot;image/png&quot;</span><span class="c4"><br>)</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c14">Note</span><span class="c21 c19 c29">: </span></p><ul class="c38 lst-kix_hyoqukwe4nl9-0 start"><li class="c1"><span class="c19">In this config file, we have set the </span><span class="c5">server.document-root</span><span class="c19">&nbsp;to </span><span class="c5">/opt/app-root/src</span><span class="c21 c19 c29">&nbsp;the same place where we copied the sources in the assemble script</span></li><li class="c1"><span class="c19">While we are placing this configuration file in the </span><span class="c5">etc</span><span class="c19">&nbsp;directory, this file is copied to an appropriate location in the container image specs ( you will see that in the next step)</span></li></ul><h3 class="c32" id="h.p52n9g5zhh7x"><span class="c20">Step 5 Edit the Container Image Specification</span></h3><p class="c16"><span class="c19">While you can start your builder from any base image, In this example we will start with a RHEL base image, so that you understand how to create S2I builders from an operating system image. </span><span class="c19">Modify the </span><span class="c5">Dockerfile</span><span class="c21 c19 c29">&nbsp;for the following changes:</span></p><ul class="c38 lst-kix_pqkbtnr8hpjg-0 start"><li class="c1"><span class="c19">We will use RHEL based builder image from Red Hat&#39;s registry. This is the just </span><span class="c41 c52"><a class="c31" href="https://www.google.com/url?q=http://rhelblog.redhat.com/2017/03/13/introducing-the-red-hat-enterprise-linux-atomic-base-image/&amp;sa=D&amp;ust=1493768895684000&amp;usg=AFQjCNHMgX48NxpNhewoQ49vgh4QlZDd_g">enough version of RHEL7</a></span><span class="c19">&nbsp;that you can use as base image for applications </span><span class="c5 c21">registry.access.redhat.com/rhel7-atomic </span></li><li class="c11"><span class="c21 c19 c29">Add your name as the Maintainer</span></li><li class="c11"><span class="c21 c19 c29">Add an environment variable to include LIGHTTPD version. The rest of the environment variables are to define where the S2I scripts are sourced from, the HOME directory on the container, and sets the PATH on the container.</span></li><li class="c11"><span class="c21 c19 c29">Then add the k8s and openshift labels to describe your builder image </span></li><li class="c28 c42"><span class="c5">rhel7-atomic</span><span>&nbsp;is a minimal image. So, we will add all the packages needed by your container. This image doesn&rsquo;t include </span><span class="c5">yum</span><span>. We will use </span><span class="c5">microdnf</span><span>&nbsp;for installing packages and clean up the packages after the install. For the image to be efficient, we minimize the number of layers as well. </span><span class="c19">In order to install Lighttpd, you will need to install epel. Hence both are included in the </span><span class="c5 c21">microdnf install</span></li><li class="c28 c42"><span>We will add a default user 1001, create the home directory and change the ownership to user 1001</span></li><li class="c11"><span class="c19">Copy the Lighttpd configuration file from </span><span class="c5">/etc</span><span class="c19">&nbsp;into </span><span class="c5 c21">/opt/app-root/etc</span></li><li class="c11"><span class="c21 c19 c29">Change the ownership of `/opt/app-root&#39; to user 1001 and set the Docker USER to 1001</span></li><li class="c11"><span class="c21 c19 c29">We will set the directory with sources as the working directory</span></li><li class="c11"><span class="c19">The label we defined before defines the location for S2I scripts </span><span class="c5">io.openshift.s2i.scripts-url=image:///usr/libexec/s2i. </span><span class="c19">Copy the s2i scripts from the &nbsp;</span><span class="c19">s2i/bin to </span><span class="c5 c21">/usr/libexec/sti</span></li><li class="c28 c42"><span>Copy the lighttpd configuration file from </span><span class="c5">etc</span><span>&nbsp;to </span><span class="c5">/opt/app-root/etc </span><span class="c21 c19 c29">on the container</span></li><li class="c28 c42"><span class="c19">Run the container as user 1001</span></li><li class="c11"><span class="c21 c19 c29">This container would expose port 8080</span></li><li class="c11"><span class="c19">If the container is started by user point to </span><span class="c5">usage</span><span class="c21 c19 c29">&nbsp;for help</span></li></ul><p class="c16"><span class="c19">The resultant code is also shown below. Edit slowly and DOUBLE CHECK. :-)</span></p><a id="t.23bbb2a62f3979da92b5ac9b785aa039e4d32ebe"></a><a id="t.10"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8 c27"># lighttpd-rhel</span></p><p class="c9"><span class="c8">FROM registry</span><span class="c2">.</span><span class="c8">access</span><span class="c2">.</span><span class="c8">redhat</span><span class="c2">.</span><span class="c8">com</span><span class="c2">/</span><span class="c8">rhel7</span><span class="c2">-</span><span class="c4">atomic</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Put the maintainer name in the image metadata</span></p><p class="c9"><span class="c8">MAINTAINER </span><span class="c0">Veer</span><span class="c8">&nbsp;</span><span class="c0">Muchandi</span><span class="c2">&lt;</span><span class="c8">veer@redhat</span><span class="c2">.</span><span class="c4">com&gt;</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Rename the builder environment variable to inform users about application you provide them</span></p><p class="c9"><span class="c8 c27"># ENV BUILDER_VERSION 1.0</span></p><p class="c9"><span class="c4">ENV \</span></p><p class="c9"><span class="c8">LIGHTTPD_VERSION</span><span class="c2">=</span><span class="c8 c12">1.4</span><span class="c2">.</span><span class="c8 c12">35</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">STI_SCRIPTS_URL</span><span class="c2">=</span><span class="c8">image</span><span class="c2">:</span><span class="c8 c27">///usr/libexec/s2i \</span></p><p class="c9"><span class="c8">STI_SCRIPTS_PATH</span><span class="c2">=</span><span class="c3">/usr/</span><span class="c8">libexec</span><span class="c2">/</span><span class="c4">s2i \</span></p><p class="c9"><span class="c8">HOME</span><span class="c2">=</span><span class="c3">/opt/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root</span><span class="c2">/</span><span class="c4">src \</span></p><p class="c9"><span class="c8">PATH</span><span class="c2">=</span><span class="c3">/opt/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root</span><span class="c2">/</span><span class="c8">src</span><span class="c2">/</span><span class="c8">bin</span><span class="c2">:</span><span class="c3">/opt/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root</span><span class="c2">/</span><span class="c8">bin</span><span class="c2">:</span><span class="c3">/usr/</span><span class="c8 c10">local</span><span class="c2">/</span><span class="c8">sbin</span><span class="c2">:</span><span class="c3">/usr/</span><span class="c8 c10">local</span><span class="c2">/</span><span class="c8">bin</span><span class="c2">:</span><span class="c3">/usr/</span><span class="c8">sbin</span><span class="c2">:</span><span class="c3">/usr/</span><span class="c8">bin</span><span class="c2">:</span><span class="c3">/sbin:/</span><span class="c4">bin</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Set labels used in OpenShift to describe the builder image</span></p><p class="c9"><span class="c8">LABEL io</span><span class="c2">.</span><span class="c8">k8s</span><span class="c2">.</span><span class="c8">description</span><span class="c2">=</span><span class="c3">&quot;Platform for serving static HTML Pages&quot;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;io</span><span class="c2">.</span><span class="c8">k8s</span><span class="c2">.</span><span class="c8">display</span><span class="c2">-</span><span class="c8">name</span><span class="c2">=</span><span class="c3">&quot;Lighttpd 1.4.35&quot;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;io</span><span class="c2">.</span><span class="c8">openshift</span><span class="c2">.</span><span class="c8">expose</span><span class="c2">-</span><span class="c8">services</span><span class="c2">=</span><span class="c3">&quot;8080:http&quot;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;io</span><span class="c2">.</span><span class="c8">openshift</span><span class="c2">.</span><span class="c8">tags</span><span class="c2">=</span><span class="c3">&quot;builder,html,lighttpd&quot;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;io</span><span class="c2">.</span><span class="c8">openshift</span><span class="c2">.</span><span class="c8">s2i</span><span class="c2">.</span><span class="c8">scripts</span><span class="c2">-</span><span class="c8">url</span><span class="c2">=</span><span class="c8">image</span><span class="c2">:</span><span class="c8 c27">///usr/libexec/s2i</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Install required packages here:</span></p><p class="c9"><span class="c8 c27"># RUN yum install -y ... &amp;&amp; yum clean all -y</span></p><p class="c9"><span class="c8">RUN microdnf install </span><span class="c2">-</span><span class="c8">y </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">rpms </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">extras</span><span class="c2">-</span><span class="c8">rpms </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">optional</span><span class="c2">-</span><span class="c4">rpms \</span></p><p class="c9"><span class="c8">automake gettext git lsof make tar unzip wget which </span><span class="c2">&amp;&amp;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">rpm </span><span class="c2">-</span><span class="c0">Uvh</span><span class="c8">&nbsp;https</span><span class="c2">:</span><span class="c8 c27">//dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm &amp;&amp; \</span></p><p class="c9"><span class="c8">microdnf install </span><span class="c2">-</span><span class="c8">y </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">rpms </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">extras</span><span class="c2">-</span><span class="c8">rpms </span><span class="c2">--</span><span class="c8">enablerepo</span><span class="c2">=</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c12">7</span><span class="c2">-</span><span class="c8">server</span><span class="c2">-</span><span class="c8">optional</span><span class="c2">-</span><span class="c8">rpms lighttpd </span><span class="c2">&amp;&amp;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">microdnf clean all </span><span class="c2">-</span><span class="c8">y </span><span class="c2">&amp;&amp;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">mkdir </span><span class="c2">-</span><span class="c8">p </span><span class="c2">/</span><span class="c8">opt</span><span class="c2">/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root </span><span class="c2">&amp;&amp;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">useradd </span><span class="c2">-</span><span class="c8">u </span><span class="c8 c12">1001</span><span class="c8">&nbsp;</span><span class="c2">-</span><span class="c8">r </span><span class="c2">-</span><span class="c8">g </span><span class="c8 c12">0</span><span class="c8">&nbsp;</span><span class="c2">-</span><span class="c8">d $</span><span class="c2">{</span><span class="c8">HOME</span><span class="c2">}</span><span class="c8">&nbsp;</span><span class="c2">-</span><span class="c8">s </span><span class="c2">/</span><span class="c8">sbin</span><span class="c2">/</span><span class="c4">nologin \</span></p><p class="c9"><span class="c8">&nbsp;</span><span class="c2">-</span><span class="c8">c </span><span class="c3">&quot;Default Application User&quot;</span><span class="c8">&nbsp;</span><span class="c8 c10">default</span><span class="c8">&nbsp;</span><span class="c2">&amp;&amp;</span><span class="c4">&nbsp;\</span></p><p class="c9"><span class="c8">chown </span><span class="c2">-</span><span class="c8">R </span><span class="c8 c12">1001</span><span class="c2">:</span><span class="c8 c12">0</span><span class="c8">&nbsp;</span><span class="c2">/</span><span class="c8">opt</span><span class="c2">/</span><span class="c8">app</span><span class="c2">-</span><span class="c4">root</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># Directory with the sources is set as the working directory so all STI scripts</span></p><p class="c9"><span class="c8 c27"># can execute relative to this path.</span></p><p class="c9"><span class="c8">WORKDIR $</span><span class="c2">{</span><span class="c4">HOME}</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># Copy the S2I scripts to /usr/libexec/s2i</span></p><p class="c9"><span class="c8">COPY </span><span class="c2">./</span><span class="c8">s2i</span><span class="c2">/</span><span class="c8">bin</span><span class="c3">/ /</span><span class="c8">usr</span><span class="c2">/</span><span class="c8">libexec</span><span class="c2">/</span><span class="c4">s2i</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># Copy the lighttpd configuration file</span></p><p class="c9"><span class="c8">COPY </span><span class="c2">./</span><span class="c8">etc</span><span class="c3">/ /</span><span class="c8">opt</span><span class="c2">/</span><span class="c8">app</span><span class="c2">-</span><span class="c8">root</span><span class="c2">/</span><span class="c4">etc</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># Drop the root user and make the content of /opt/app-root owned by user 1001</span></p><p class="c9"><span class="c8">RUN chown </span><span class="c2">-</span><span class="c8">R </span><span class="c8 c12">1001</span><span class="c2">:</span><span class="c8 c12">1001</span><span class="c8">&nbsp;</span><span class="c2">/</span><span class="c8">opt</span><span class="c2">/</span><span class="c8">app</span><span class="c2">-</span><span class="c4">root</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># This default user is created in the openshift/base-centos7 image</span></p><p class="c9"><span class="c8">USER </span><span class="c8 c12">1001</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Set the default port for applications built using this image</span></p><p class="c9"><span class="c8">EXPOSE </span><span class="c8 c12">8080</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8 c27"># TODO: Set the default CMD for the image</span></p><p class="c9"><span class="c8">CMD </span><span class="c2">[</span><span class="c3">&quot;/usr/libexec/s2i/usage&quot;]</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><h3 class="c32" id="h.jh3syhxynbi"><span class="c20">Step 6 Build the S2I Builder Image</span></h3><p class="c16 c18"><span class="c21 c19 c29"></span></p><p class="c16"><span class="c19">Change to </span><span class="c5">s2i-lighttpd</span><span class="c19">&nbsp;directory and run</span></p><a id="t.fdc0769432855a1c7183a366e50445850d7b758b"></a><a id="t.11"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c4">$ sudo make build</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c25"><span class="c19">This step will invoke &quot;docker build&quot; using the Dockerfile above to create a docker image with name </span><span class="c5">lighttpd-rhel</span><span class="c21 c19 c29">.</span></p><p class="c16"><span class="c19">Upon successful execution of </span><span class="c5">sudo make build</span><span class="c19">&nbsp;run</span></p><a id="t.ee0d35e3578482b3f3ccce319d8a205683289eff"></a><a id="t.12"></a><table class="c13"><tbody><tr class="c15"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ docker images</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">to verify the existence of the </span><span class="c5">lighttpd-rhel</span><span class="c21 c19 c29">&nbsp;image on your rhel box.</span></p><h3 class="c55" id="h.354c0k9guvn2"><span>Step 7 Testing the S2I Image Locally</span></h3><p class="c16"><span class="c19">Now it&rsquo;s time to test our builder image. Let&#39;s create an </span><span class="c5 c6">index.html</span><span class="c19">&nbsp;file in the </span><span class="c5 c6">s2i-lighttpd/test/test-app</span><span class="c19">&nbsp;directory with the following contents:</span></p><a id="t.1c359c1893878df493e9714e9c6e9ce81b7e1147"></a><a id="t.13"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;!doctype html&gt;</span><span class="c8"><br></span><span class="c8 c10">&lt;html&gt;</span><span class="c8"><br> &nbsp;</span><span class="c8 c10">&lt;head&gt;</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c8 c10">&lt;title&gt;</span><span class="c8">Hello World!</span><span class="c8 c10">&lt;/title&gt;</span><span class="c8"><br> &nbsp;</span><span class="c8 c10">&lt;/head&gt;</span><span class="c8"><br></span><span class="c8 c10">&lt;body&gt;</span><span class="c8"><br> &nbsp;</span><span class="c8 c10">&lt;h1&gt;</span><span class="c8">Hello World from Lighttpd!</span><span class="c8 c10">&lt;/h1&gt;</span><span class="c8"><br></span><span class="c8 c10">&lt;/body&gt;</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Note from the </span><span class="c5 c6">lighttpd.conf</span><span class="c19">&nbsp;file above that </span><span class="c5 c6">index.html</span><span class="c21 c19 c29">&nbsp;is the default</span></p><p class="c16"><span class="c19">Now let us do the first build. Run the following command from the s2i-lighttpd directory:</span></p><a id="t.947fc576d2c659cdeeb505456cd6ce4a3519df77"></a><a id="t.14"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ sudo </span><span class="c2">/</span><span class="c8">usr</span><span class="c2">/</span><span class="c8 c10">local</span><span class="c2">/</span><span class="c8">bin</span><span class="c2">/</span><span class="c8">s2i build test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">app</span><span class="c2">/</span><span class="c8">&nbsp;lighttpd</span><span class="c2">-</span><span class="c8">rhel sample</span><span class="c2">-</span><span class="c4">app</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">This invokes the S2I build process using the </span><span class="c5">assemble</span><span class="c19">&nbsp;script in the lighttpd-rhel image. The build creates an application image for the test application with name </span><span class="c5">sample-app</span><span class="c21 c19 c29">.</span></p><p class="c16"><span class="c19">Once the image is created you can check the existence by running </span><span class="c5">docker images</span><span class="c19">&nbsp;again to find </span><span class="c5">sample-app</span><span class="c21 c19 c29">.</span></p><p class="c16"><span class="c19">Now to test the </span><span class="c5">sample-app</span><span class="c19">&nbsp;image run it with docker </span></p><a id="t.04f1875d47462b41a7b323f0e6d432ab6d02bb1b"></a><a id="t.15"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ docker run </span><span class="c2">-</span><span class="c8">p </span><span class="c8 c12">8080</span><span class="c2">:</span><span class="c8 c12">8080</span><span class="c8">&nbsp;sample</span><span class="c2">-</span><span class="c4">app</span></p></td></tr></tbody></table><p class="c25"><span class="c5 c6"><br></span><span class="c19">and test it from the browser using </span><span class="c41 c52"><a class="c31" href="https://www.google.com/url?q=http://localhost:8080&amp;sa=D&amp;ust=1493768895920000&amp;usg=AFQjCNHIqt4g1KaHo52CsRi9VIT4W7KVEg">http://localhost:8080</a></span><span class="c19">. You should see a response.</span></p><p class="c25"><span style="overflow: hidden; display: inline-block; margin: 0.00px -0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 496.50px; height: 134.47px;"><img alt="" src="images/image6.png" style="width: 496.50px; height: 134.47px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c28"><span>Let us run the next test with a zip file (Remember our lighttpd-rhel s2i builder can also handle zip files!!). &nbsp;Follow the steps in the code snippet below. We will create a new test directory by copying the previous test contents. We will edit the </span><span class="c5">index.html</span><span>&nbsp;file. Then create a zip file using the </span><span class="c5">index.html</span><span>&nbsp;and remove the </span><span class="c5">index.html</span><span class="c22 c21">&nbsp;file. So at the end the contents of the test case is a zip file.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><a id="t.a4ba19eed9b032b6b4d522b84ffa1431fe39eb3f"></a><a id="t.16"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab s2i</span><span class="c2">-</span><span class="c8">lighttpd</span><span class="c2">]</span><span class="c8">$ cp </span><span class="c2">-</span><span class="c8">R test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">app</span><span class="c2">/</span><span class="c8">&nbsp;test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c4">app</span></p><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab s2i</span><span class="c2">-</span><span class="c8">lighttpd</span><span class="c2">]</span><span class="c8">$ vi test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c8">app</span><span class="c2">/</span><span class="c8">index</span><span class="c2">.</span><span class="c4">html</span></p><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab s2i</span><span class="c2">-</span><span class="c8">lighttpd</span><span class="c2">]</span><span class="c8">$ cat test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c8">app</span><span class="c2">/</span><span class="c8">index</span><span class="c2">.</span><span class="c4">html</span></p><p class="c9"><span class="c0">&lt;!doctype html&gt;</span></p><p class="c9"><span class="c8 c10">&lt;html&gt;</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c10">&lt;head&gt;</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="c8 c10">&lt;title&gt;</span><span class="c8">Hello World!</span><span class="c8 c10">&lt;/title&gt;</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c10">&lt;/head&gt;</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c10">&lt;body&gt;</span></p><p class="c9"><span class="c8">&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="c8 c10">&lt;h1&gt;</span><span class="c8">Hello from ZIP file test!</span><span class="c8 c10">&lt;/h1&gt;</span></p><p class="c9"><span class="c8">&nbsp; &nbsp; </span><span class="c8 c10">&lt;/body&gt;</span></p><p class="c9"><span class="c8 c10">&lt;/html&gt;</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c4">[student@ocp-lab s2i-lighttpd]$ cd test/test-zip-app</span></p><p class="c9"><span class="c4">[student@ocp-lab test-zip-app]$ zip test.zip index.html</span></p><p class="c9"><span class="c4">&nbsp; adding: index.html (deflated 27%)</span></p><p class="c9"><span class="c4">[student@ocp-lab test-zip-app]$ rm index.html</span></p><p class="c9"><span class="c8">[student@ocp-lab test-zip-app]$ cd ../..</span></p><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab s2i</span><span class="c2">-</span><span class="c8">lighttpd</span><span class="c2">]</span><span class="c8">$ ls test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c4">app/</span></p><p class="c9"><span class="c8">test</span><span class="c2">.</span><span class="c4">zip</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c28"><span class="c22 c21">Let us run a new build. BTW, if you see a warning like below, ignore it.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><a id="t.e7143dbb8980004ed50c7c582a6739da65a3b5a2"></a><a id="t.17"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab s2i</span><span class="c2">-</span><span class="c8">lighttpd</span><span class="c2">]</span><span class="c8">$ sudo </span><span class="c2">/</span><span class="c8">usr</span><span class="c2">/</span><span class="c8 c10">local</span><span class="c2">/</span><span class="c8">bin</span><span class="c2">/</span><span class="c8">s2i build test</span><span class="c2">/</span><span class="c8">test</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c8">app</span><span class="c2">/</span><span class="c8">&nbsp;lighttpd</span><span class="c2">-</span><span class="c8">rhel sample</span><span class="c2">-</span><span class="c8">zip</span><span class="c2">-</span><span class="c4">app</span></p><p class="c9"><span class="c2">---&gt;</span><span class="c8">&nbsp;</span><span class="c0">Installing</span><span class="c8">&nbsp;application source</span><span class="c2">...</span></p><p class="c9"><span class="c2">---&gt;</span><span class="c8">&nbsp;</span><span class="c0">Building</span><span class="c8">&nbsp;application </span><span class="c8 c10">from</span><span class="c8">&nbsp;source</span><span class="c2">...</span></p><p class="c9"><span class="c0">Archive</span><span class="c2">:</span><span class="c8">&nbsp; test</span><span class="c2">.</span><span class="c4">zip</span></p><p class="c9"><span class="c8">inflating</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">/tmp/</span><span class="c8">src</span><span class="c2">/</span><span class="c8">index</span><span class="c2">.</span><span class="c4">html</span></p><p class="c9"><span class="c8">warning</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Failed</span><span class="c8">&nbsp;to kill container </span><span class="c3">&quot;69e13d3b7e30934a071bd844e7eb716eb748eccfda0d8b5f86b65d867c0de554&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Error</span><span class="c8">&nbsp;response </span><span class="c8 c10">from</span><span class="c8">&nbsp;daemon</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{</span><span class="c3">&quot;message&quot;</span><span class="c2">:</span><span class="c3">&quot;Cannot kill container 69e13d3b7e30934a071bd844e7eb716eb748eccfda0d8b5f86b65d867c0de554: Container 69e13d3b7e30934a071bd844e7eb716eb748eccfda0d8b5f86b65d867c0de554 is not running&quot;}</span></p></td></tr></tbody></table><p class="c7"><span class="c4"></span></p><p class="c16"><span class="c19">Once the image is created you can check the existence by running </span><span class="c5">docker images</span><span class="c19">&nbsp;again to find </span><span class="c5">sample-zip-app</span><span class="c21 c19 c29">.</span></p><p class="c16"><span class="c19">Now to test the </span><span class="c5">sample-app</span><span class="c19">&nbsp;image run it with docker and check back in the browser.</span></p><a id="t.5572f500e1e1eaaba11855b34e640d2a6ad6d0f4"></a><a id="t.18"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ docker run </span><span class="c2">-</span><span class="c8">p </span><span class="c8 c12">8080</span><span class="c2">:</span><span class="c8 c12">8080</span><span class="c8">&nbsp;sample-zip</span><span class="c2">-</span><span class="c4">app</span></p></td></tr></tbody></table><p class="c25"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 2.67px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 584.50px; height: 142.38px;"><img alt="" src="images/image3.png" style="width: 584.50px; height: 142.38px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h3 class="c32" id="h.t41zv2ji8b18"><span class="c20">Step 8 Login to OpenShift registry</span></h3><p class="c16 c18"><span class="c21 c19 c29"></span></p><p class="c16"><span class="c21 c19 c29">Now we are ready to test our S2I Builder on an OpenShift Cluster.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><hr><p class="c28 c18"><span class="c22 c21"></span></p><p class="c16"><span class="c21 c14 c50">Notes for the Cluster Administrator. Others can read as well</span></p><p class="c16"><span class="c19">Pushing to an OpenShift Cluster requires the registry on the cluster to have been exposed (i.e registry service should have been exposed by a route) following the process listed here </span><span class="c41 c52"><a class="c31" href="https://www.google.com/url?q=https://docs.openshift.com/container-platform/3.4/install_config/registry/securing_and_exposing_registry.html&amp;sa=D&amp;ust=1493768896028000&amp;usg=AFQjCNG_YU2h1cduz78C9RWc2Bu2Lq-ScA">https://docs.openshift.com/container-platform/3.4/install_config/registry/securing_and_exposing_registry.html</a></span></p><p class="c16"><span class="c19">Also you need a user that is given </span><span class="c5">system:registry</span><span class="c19">&nbsp;role to be able to login to this registry as described here </span><span class="c29 c45"><a class="c31" href="https://www.google.com/url?q=https://github.com/RedHatWorkshops/openshiftv3-advanced-workshop/blob/master&amp;sa=D&amp;ust=1493768896031000&amp;usg=AFQjCNG8GgplbzgPKJGA9prtv_ChIUTInA">https://docs.openshift.com/container-platform/3.3/install_config/registry/accessing_registry.html#access-user-prerequisites</a></span></p><p class="c16"><span class="c19">As an example the cluster administrator should have run the following command to allow user </span><span class="c5 c6">developer</span><span class="c21 c19 c29">&nbsp;to talk to registry.</span></p><p class="c25"><span class="c5 c21 c6">oc adm policy add-role-to-user system:registry developer<br></span></p><p class="c25"><span class="c19">Also the user pushing the images should be given </span><span class="c5">image-builder</span><span class="c21 c19 c29">&nbsp;role by the administrator to the project into which the image is being pushed. This is not available by default even if it is user&#39;s own project. As an example, the administrator should run the following command.</span></p><p class="c25"><span class="c5 c21 c6">oc adm policy add-role-to-user system:image-builder developer -n myproject<br></span></p><hr><p class="c28 c18"><span class="c22 c21"></span></p><p class="c7"><span class="c5 c21 c6"></span></p><p class="c28"><span>For this lab, the openshift user </span><span class="c5 c6">developer</span><span>&nbsp;has been provided access to push images to a project named &nbsp;</span><span class="c5 c6">myproject</span><span class="c22 c21">.</span></p><p class="c28 c18"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Let us first login to openshift local cluster running at </span><span class="c8 c41"><a class="c31" href="https://www.google.com/url?q=https://ocp.127.0.0.1.nip.io:8443&amp;sa=D&amp;ust=1493768896043000&amp;usg=AFQjCNFKLFOcsNyHDn5MHO_4sVPkH1YI1A">https://ocp.127.0.0.1.nip.io:8443</a></span><span class="c8 c27">&nbsp;</span><span class="c19">from your command line using username </span><span class="c5 c6">developer</span><span class="c19">&nbsp;and password </span><span class="c5 c6">developer</span></p><a id="t.ed88827741417f9408c4043ba34a4ebb155e5596"></a><a id="t.19"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ oc login https</span><span class="c2">:</span><span class="c8 c27">//ocp.127.0.0.1.nip.io:8443</span></p><p class="c9"><span class="c0">The</span><span class="c8">&nbsp;server uses a certificate </span><span class="c8 c10">signed</span><span class="c8">&nbsp;</span><span class="c8 c10">by</span><span class="c4">&nbsp;an unknown authority.</span></p><p class="c9"><span class="c0">You</span><span class="c8">&nbsp;can bypass the certificate check</span><span class="c2">,</span><span class="c8">&nbsp;but any data you send to the server could be intercepted </span><span class="c8 c10">by</span><span class="c4">&nbsp;others.</span></p><p class="c9"><span class="c0">Use</span><span class="c8">&nbsp;insecure connections</span><span class="c2">?</span><span class="c8">&nbsp;</span><span class="c2">(</span><span class="c8">y</span><span class="c2">/</span><span class="c8">n</span><span class="c2">):</span><span class="c4">&nbsp;y</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c0">Authentication</span><span class="c8">&nbsp;required </span><span class="c8 c10">for</span><span class="c8">&nbsp;https</span><span class="c2">:</span><span class="c8 c27">//ocp.127.0.0.1.nip.io:8443 (openshift)</span></p><p class="c9"><span class="c0">Username</span><span class="c2">:</span><span class="c4">&nbsp;developer</span></p><p class="c9"><span class="c0">Password:</span></p><p class="c9"><span class="c0">Login</span><span class="c4">&nbsp;successful.</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c0">You</span><span class="c8">&nbsp;have one project on </span><span class="c8 c10">this</span><span class="c8">&nbsp;server</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;myproject&quot;</span></p><p class="c9 c18"><span class="c4"></span></p><p class="c9"><span class="c0">Using</span><span class="c8">&nbsp;project </span><span class="c3">&quot;myproject&quot;.</span></p><p class="c9"><span class="c0">Welcome</span><span class="c2">!</span><span class="c8">&nbsp;</span><span class="c0">See</span><span class="c8">&nbsp;</span><span class="c3">&#39;oc help&#39;</span><span class="c8">&nbsp;to </span><span class="c8 c10">get</span><span class="c4">&nbsp;started.</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Find the oauth token assigned at login by running the following command. We will use this same token to log into docker registry.</span></p><a id="t.0ccdcdef5afdea08e69b17866f69a65eea871cfc"></a><a id="t.20"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ oc whoami </span><span class="c2">-t</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c25"><span class="c21 c19 c29">Make a note the oauth-token output by the command above. This token will serve as a password to log into the docker registry running on OpenShift.</span></p><p class="c28"><span class="c21 c17 c29">Let us now &nbsp;login to the registry running on OpenShift. </span></p><p class="c28 c18"><span class="c21 c17 c29"></span></p><p class="c28"><span class="c17">Your OpenShift local cluster has the registry service assigned an ip address of </span><span class="c5 c6">172.30.1.1</span><span class="c17">. Login to the docker registry using </span><span class="c5 c6">oauth-token</span><span class="c17">&nbsp;from the last step, using username </span><span class="c5 c6">developer</span><span class="c17">, and the registry url of </span><span class="c5 c6">172.30.1.1:5000</span><span class="c21 c17 c29">. &nbsp;This command will log you into the registry. </span></p><p class="c7"><span class="c4"></span></p><a id="t.0aacf74263f3eb17fbef1399c42aa5716eaa25d7"></a><a id="t.21"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ docker login </span><span class="c2">-</span><span class="c8">u developer </span><span class="c2">-</span><span class="c8">p </span><span class="c2">&lt;</span><span class="c8">oauth</span><span class="c2">-</span><span class="c8">token</span><span class="c2">&gt;</span><span class="c8">&nbsp;</span><span class="c8 c12">172.30</span><span class="c2">.</span><span class="c8 c12">1.1</span><span class="c2">:</span><span class="c8 c12">5000</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c28"><span class="c14 c53">Note</span><span class="c17">: If you were using a secured registry, in order to connect to the registry, you will need certificate that is trusted by the registry. You would place the certificate in </span><span class="c5">/etc/docker/certs.d/&lt;registry-url&gt;</span><span class="c21 c17 c29">&nbsp;folder. For this lab, we are using a local OpenShift cluster and hence this step is not required.</span></p><p class="c28 c18"><span class="c21 c17 c29"></span></p><h3 class="c32" id="h.gpeyfanacsqv"><span class="c20">Step 9 Create ImageStream</span></h3><p class="c28"><span>L</span><span class="c22 c21">et us tag the image we created earlier to push into the OpenShift Cluster.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><p class="c25"><span class="c5 c21 c6">$ docker tag lighttpd-rhel 172.30.1.1:5000/myproject/lighttpd-rhel</span></p><p class="c28"><span>This command will add a new tag for the </span><span class="c5 c6">lighttpd-rhel</span><span>&nbsp;image that we created earlier to be pushed into the openshift registry into namespace </span><span class="c5 c6">myproject</span><span class="c22 c21">.</span></p><p class="c28 c18"><span class="c21 c22"></span></p><p class="c16"><span class="c19">We now need an imagestream where we will declare that this image is a builder image, so that we can use it from the web console via the catalog to build our application. </span><span class="c19">Create a new json ImageStream file with the following content. Edit to make sure your image name matches with what you noted in the previous step. Let us name it as </span><span class="c5">lighttpd-rhel-is.json</span><span class="c19">. Also make sure that the </span><span class="c5">namespace</span><span class="c19">&nbsp;is pointing to your project name (</span><span class="c5">myproject</span><span class="c21 c19 c29">)</span></p><p class="c7"><span class="c4"></span></p><a id="t.13b63dc3cd16c1a290248256d2c14f583f683aa0"></a><a id="t.22"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c3">&quot;kind&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;ImageStream&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c3">&quot;apiVersion&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;v1&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c3">&quot;metadata&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;name&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;lighttpd-rhel&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;namespace&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;myproject&quot;</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c2">},</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c3">&quot;spec&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;tags&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">[</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;name&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;latest&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;annotations&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;description&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;Run HTML&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;iconClass&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;icon-tomcat&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;tags&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;builder,lighttpd&quot;</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">},</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;from&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;kind&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;DockerImage&quot;</span><span class="c2">,</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c3">&quot;name&quot;</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;172.30.1.1:</span><span class="c3">5000</span><span class="c3">/myproject/lighttpd-rhel:latest&quot;</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">}</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">}</span><span class="c8"><br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c2">]</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c2">}</span><span class="c4"><br>}</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Note the </span><span class="c5">tags</span><span class="c19">&nbsp;section that uses the </span><span class="c5">builder</span><span class="c21 c19 c29">&nbsp;tag. This is required for OpenShift to recognize this imagestream as a builder image and to display on the catalog when you access from the web console.</span></p><p class="c16"><span class="c19">Let us now add this imagestream to </span><span class="c5 c6">myproject</span><span class="c19">&nbsp;on the OpenShift cluster.</span></p><a id="t.7c88f7a35200edaf99b1331f9f9af2dc78ced2b1"></a><a id="t.23"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ oc create </span><span class="c2">-</span><span class="c8">f lighttpd</span><span class="c2">-</span><span class="c8">rhel</span><span class="c2">-</span><span class="c8 c10">is</span><span class="c2">.</span><span class="c8">json </span><span class="c2">-</span><span class="c4">n myproject</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Verify the image streams in your project by running the following command.</span></p><a id="t.650ad191f8b117f1fcb946e6c38ab0b93187ba2c"></a><a id="t.24"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ oc </span><span class="c8 c10">get</span><span class="c8">&nbsp;</span><span class="c8 c10">is</span><span class="c8">&nbsp;</span><span class="c2">-</span><span class="c4">n myproject</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">and you should see an image with name </span><span class="c5">lighttpd-rhel</span><span class="c19">. However, the tags should be empty since we did not push the docker image into the registry yet.</span></p><h3 class="c32" id="h.1hajppc06stu"><span class="c20">Step 10 Pushing image to Registry</span></h3><p class="c16"><span class="c19">N</span><span class="c19">ow push the docker image into the docker registry on your openshift cluster. </span></p><a id="t.e9bb7745ad9fa2efaa3e0186062d15963d68fe1f"></a><a id="t.25"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c8">$ docker push </span><span class="c8 c12">172.30</span><span class="c2">.</span><span class="c8 c12">1.1</span><span class="c2">:</span><span class="c8 c12">5000</span><span class="c2">/</span><span class="c8">myproject</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c4">rhel</span></p></td></tr></tbody></table><p class="c7"><span class="c5 c21 c6"></span></p><p class="c16"><span class="c19">Check the image stream in your project and you should see the </span><span class="c5">lighthttpd-rhel</span><span class="c19">&nbsp;image with appropriate tags as shown below:</span></p><a id="t.93d020c85b67f6bc8038ceec15ca767275787c90"></a><a id="t.26"></a><table class="c13"><tbody><tr class="c23"><td class="c26" colspan="1" rowspan="1"><p class="c9"><span class="c2">[</span><span class="c8">student@ocp</span><span class="c2">-</span><span class="c8">lab </span><span class="c2">~]</span><span class="c8">$ oc </span><span class="c8 c10">get</span><span class="c8">&nbsp;</span><span class="c8 c10">is</span><span class="c8">&nbsp;lighttpd</span><span class="c2">-</span><span class="c8">rhel </span><span class="c2">-</span><span class="c8">o yaml<br>apiVersion</span><span class="c2">:</span><span class="c8">&nbsp;v1<br>kind</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">ImageStream</span><span class="c8"><br>metadata</span><span class="c2">:</span><span class="c8"><br> &nbsp;annotations</span><span class="c2">:</span><span class="c8"><br> &nbsp; &nbsp;openshift</span><span class="c2">.</span><span class="c8">io</span><span class="c2">/</span><span class="c8">image</span><span class="c2">.</span><span class="c8">dockerRepositoryCheck</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2017</span><span class="c2">-</span><span class="c8 c12">04</span><span class="c2">-</span><span class="c8 c12">13T22</span><span class="c2">:</span><span class="c8 c12">54</span><span class="c2">:</span><span class="c8 c12">46Z</span><span class="c8"><br> &nbsp;creationTimestamp</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2017</span><span class="c2">-</span><span class="c8 c12">04</span><span class="c2">-</span><span class="c8 c12">13T22</span><span class="c2">:</span><span class="c8 c12">54</span><span class="c2">:</span><span class="c8 c12">46Z</span><span class="c8"><br> &nbsp;generation</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2</span><span class="c8"><br> &nbsp;name</span><span class="c2">:</span><span class="c8">&nbsp;lighttpd</span><span class="c2">-</span><span class="c8">rhel<br> &nbsp;</span><span class="c8 c10">namespace</span><span class="c2">:</span><span class="c8">&nbsp;myproject<br> &nbsp;resourceVersion</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">&quot;5114&quot;</span><span class="c8"><br> &nbsp;selfLink</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c3">/oapi/</span><span class="c8">v1</span><span class="c2">/</span><span class="c8">namespaces</span><span class="c2">/</span><span class="c8">myproject</span><span class="c2">/</span><span class="c8">imagestreams</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c8">rhel<br> &nbsp;uid</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">31016623</span><span class="c2">-</span><span class="c8 c12">209c</span><span class="c2">-</span><span class="c8 c12">11e7</span><span class="c2">-</span><span class="c8 c12">9372</span><span class="c2">-</span><span class="c8 c12">0800277e3835</span><span class="c8"><br>spec</span><span class="c2">:</span><span class="c8"><br> &nbsp;tags</span><span class="c2">:</span><span class="c8"><br> &nbsp;</span><span class="c2">-</span><span class="c8">&nbsp;annotations</span><span class="c2">:</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;description</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">Run</span><span class="c8">&nbsp;HTML<br> &nbsp; &nbsp; &nbsp;iconClass</span><span class="c2">:</span><span class="c8">&nbsp;icon</span><span class="c2">-</span><span class="c8">tomcat<br> &nbsp; &nbsp; &nbsp;tags</span><span class="c2">:</span><span class="c8">&nbsp;builder</span><span class="c2">,</span><span class="c8">lighttpd<br> &nbsp; &nbsp;</span><span class="c8 c10">from</span><span class="c2">:</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;kind</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c0">DockerImage</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;name</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">172.30</span><span class="c2">.</span><span class="c8 c12">1.1</span><span class="c2">:</span><span class="c8 c12">5000</span><span class="c2">/</span><span class="c8">myproject</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c8">rhel</span><span class="c2">:</span><span class="c8">latest<br> &nbsp; &nbsp;generation</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2</span><span class="c8"><br> &nbsp; &nbsp;importPolicy</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c2">{}</span><span class="c8"><br> &nbsp; &nbsp;name</span><span class="c2">:</span><span class="c8">&nbsp;latest<br>status</span><span class="c2">:</span><span class="c8"><br> &nbsp;dockerImageRepository</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">172.30</span><span class="c2">.</span><span class="c8 c12">1.1</span><span class="c2">:</span><span class="c8 c12">5000</span><span class="c2">/</span><span class="c8">myproject</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c8">rhel<br> &nbsp;tags</span><span class="c2">:</span><span class="c8"><br> &nbsp;</span><span class="c2">-</span><span class="c8">&nbsp;items</span><span class="c2">:</span><span class="c8"><br> &nbsp; &nbsp;</span><span class="c2">-</span><span class="c8">&nbsp;created</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2017</span><span class="c2">-</span><span class="c8 c12">04</span><span class="c2">-</span><span class="c8 c12">13T22</span><span class="c2">:</span><span class="c8 c12">55</span><span class="c2">:</span><span class="c8 c12">17Z</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;dockerImageReference</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">172.30</span><span class="c2">.</span><span class="c8 c12">1.1</span><span class="c2">:</span><span class="c8 c12">5000</span><span class="c2">/</span><span class="c8">myproject</span><span class="c2">/</span><span class="c8">lighttpd</span><span class="c2">-</span><span class="c8">rhel@sha256</span><span class="c2">:</span><span class="c8">f83d4c776d5e86a37fa083606d4d314ae6ddce26967dac1cd342660c0d8d011a<br> &nbsp; &nbsp; &nbsp;generation</span><span class="c2">:</span><span class="c8">&nbsp;</span><span class="c8 c12">2</span><span class="c8"><br> &nbsp; &nbsp; &nbsp;image</span><span class="c2">:</span><span class="c8">&nbsp;sha256</span><span class="c2">:</span><span class="c8">f83d4c776d5e86a37fa083606d4d314ae6ddce26967dac1cd342660c0d8d011a<br> &nbsp; &nbsp;tag</span><span class="c2">:</span><span class="c4">&nbsp;latest</span></p></td></tr></tbody></table><p class="c16 c18"><span class="c21 c19 c29"></span></p><h3 class="c32" id="h.r4rcbqd23vjm"><span class="c20">Step 11 Test deploying an application</span></h3><p class="c16"><span class="c19">Now it is time to test your </span><span class="c5">lighttpd-rhel</span><span class="c21 c19 c29">&nbsp;S2I image from the Web Console.</span></p><ul class="c38 lst-kix_nvv2jcnlk6ac-0 start"><li class="c1"><span class="c19">Login to the Web Console and select the </span><span class="c5">myproject</span><span class="c21 c19 c29">&nbsp;project</span></li><li class="c11"><span class="c19">Select </span><span class="c5">Add to Project</span><span class="c21 c19 c29">&nbsp;Button</span></li><li class="c11"><span class="c19">You can search for </span><span class="c5">lighttpd-rhel</span><span class="c21 c19 c29">&nbsp;image in the catalog. </span></li><li class="c11"><span class="c19">Select this image, give a name and the following git-url to try out a simple webpage to deploy </span><span class="c45 c29"><a class="c31" href="https://www.google.com/url?q=https://github.com/RedHatWorkshops/openshiftv3-advanced-workshop/blob/master&amp;sa=D&amp;ust=1493768896247000&amp;usg=AFQjCNEqWtTVZEJQKKgmB3jxI6e3OI7Tjg">https://github.com/VeerMuchandi/simple</a></span></li></ul><p class="c16"><span class="c21 c19 c29">This should build and deploy the application.</span></p><p class="c16"><span class="c19">Once tested, if you want to make this image available across the cluster, handover your imagestream file and the image to the cluster administrator. The administrator would have to repeat steps 7 thru 9 for the </span><span class="c5">openshift </span><span class="c21 c19 c29">namespace.</span></p><h2 class="c55" id="h.13h33prtga01"><span class="c21 c47 c29">Summary</span></h2><p class="c28"><span class="c19">Congratulations!!, In this lab you have learned how to create, test and use an S2I Builder image of your own. Please try out the technologies of your choice with S2I.</span></p><p class="c28 c18"><span class="c22 c21"></span></p><div><p class="c28 c18"><span class="c22 c21"></span></p></div></body></html>